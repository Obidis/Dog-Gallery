(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))i(e);new MutationObserver(e=>{for(const o of e)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&i(s)}).observe(document,{childList:!0,subtree:!0});function r(e){const o={};return e.integrity&&(o.integrity=e.integrity),e.referrerPolicy&&(o.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?o.credentials="include":e.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(e){if(e.ep)return;e.ep=!0;const o=r(e);fetch(e.href,o)}})();class n{constructor(t,r=6,i="",e=[]){this.numberImages=r,this.images=t,this.breedId=i,this.dogs=e,this.favoritos=JSON.parse(localStorage.getItem("favoritos"))||[]}async mostrarImagenes(){try{document.getElementById("hero-img").innerHTML="",this.breedId=document.getElementById("breedTodo").value,this.images=await fetch(` https://api.thedogapi.com/v1/images/search?breed_ids=${this.breedId}&limit=${this.numberImages}`),this.dogs=await this.images.json();const t=document.getElementById("hero-img");for(let r=0;r<this.numberImages;r++){const i=this.dogs[r],e=document.createElement("div");e.classList="imgDiv";const o=document.createElement("img");o.classList="img",o.alt="dog image",o.setAttribute("loading","lazy"),o.setAttribute("width","auto"),o.setAttribute("height","auto");const s=document.createElement("button");s.classList="todo-checkbox",o.src=i.url,o.id=i.id,e.appendChild(o),e.appendChild(s),t.appendChild(e)}}catch(t){this.showError(),console.error("error al obtener las imagenes",t)}}async masImagenes(){try{document.getElementById("hero-img").innerHTML="",this.numberImages+=6,this.breedId=document.getElementById("breedTodo").value,this.images=await fetch(` https://api.thedogapi.com/v1/images/search?breed_ids=${this.breedId}&limit=${this.numberImages}`);const t=await this.images.json();this.dogs=this.dogs.concat(t),this.mostrarImagenes()}catch(t){console.error("error al obtener las imagenes",t)}}async getDogsBreeds(){const t=(i,e)=>i[0]+e[0];this.breeds=await fetch(" https://api.thedogapi.com/v1/breeds").then(i=>i.json()).then(i=>i.sort(t)).then(i=>i);let r=document.getElementById("breedTodo");this.breeds.map(i=>{let e=document.createElement("option");e.value=i.id,e.textContent=i.name,r.append(e)})}saveToLocalStorage(){document.getElementById("hero-img").addEventListener("click",t=>{t.target.matches(".todo-checkbox")&&(t.target.style.background=this.getPhoto(),this.favoritos.push(t.target.parentNode.innerHTML),localStorage.setItem("favoritos",JSON.stringify(this.favoritos)))})}mostrarFavoritos(){const t=document.getElementById("hero-favorites");for(let r=0;r<this.favoritos.length;r++){const i=this.favoritos[r],e=document.createElement("div");e.classList="imgDiv",e.setAttribute("data-index",r);const o=document.createElement("img");o.classList="img",o.alt="dog image",o.setAttribute("loading","lazy"),o.setAttribute("width","auto"),o.setAttribute("height","auto");const s=document.createElement("button");s.classList="img-btn",o.src=i.match(/src="([^"]+)"/)[1],e.appendChild(o),e.appendChild(s),t.appendChild(e)}}eliminarFavorito(){document.getElementById("hero-favorites").addEventListener("click",t=>{if(t.target.matches(".img-btn")){this.favoritos=JSON.parse(localStorage.getItem("favoritos"))||[];const r=t.target.parentNode.getAttribute("data-index");this.favoritos.splice(r,1),localStorage.setItem("favoritos",JSON.stringify(this.favoritos)),t.target.parentNode.remove(),location.reload()}})}clearLocalStorage(){localStorage.clear(),location.reload()}showError(){const t=document.getElementById("popup");t.showPopover(),setTimeout(()=>{t.hidePopover()},4e3)}loader(){window.addEventListener("load",()=>{const t=document.getElementById("contenedor-carga");t.style.opacity=0,t.style.visibility="hidden"})}getPhoto(){return'url("/img/favorite_red.svg")no-repeat'}}export{n as G};
